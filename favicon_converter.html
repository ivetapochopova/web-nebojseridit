<!DOCTYPE html>
<html>

<head>
    <title>Favicon Converter</title>
</head>

<body>
    <h2>Převod faviconu na černou s průhledným pozadím</h2>
    <canvas id="canvas" style="border: 1px solid black;"></canvas>
    <br><br>
    <button onclick="downloadFavicon()">Stáhnout favicon</button>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const img = new Image();

        img.onload = function () {
            canvas.width = img.width;
            canvas.height = img.height;
            ctx.drawImage(img, 0, 0);

            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;

            // Převést tmavě modrou (#2c3e50 nebo podobnou) na černou
            // a bílou/světlou na průhlednou
            for (let i = 0; i < data.length; i += 4) {
                const r = data[i];
                const g = data[i + 1];
                const b = data[i + 2];

                // Pokud je pixel světlý (bílý nebo téměř bílý), udělej ho průhledný
                if (r > 200 && g > 200 && b > 200) {
                    data[i + 3] = 0; // průhledný
                }
                // Pokud je pixel tmavý (modrý nebo černý), udělej ho černý
                else if (r < 100 && g < 100 && b < 150) {
                    data[i] = 0;     // černá
                    data[i + 1] = 0;
                    data[i + 2] = 0;
                    data[i + 3] = 255; // neprůhledný
                }
            }

            ctx.putImageData(imageData, 0, 0);
        };

        img.src = 'Obrazky/favicon_original.png';

        function downloadFavicon() {
            canvas.toBlob(function (blob) {
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'favicon.png';
                a.click();
            });
        }
    </script>
</body>

</html>